<div class="table-container">
  <div class="search-container">
    <button mat-raised-button style="background: linear-gradient(192deg, rgb(131, 164, 236) 0%, rgb(79, 154, 240) 50%, rgba(0, 58, 219, 1) 100%);
  color:#fff" (click)="downloadPDF()">Download PDF
      <i class="fa-solid fa-download"></i>
    </button>
    <button mat-raised-button style="background: linear-gradient(192deg, rgb(131, 164, 236) 0%, rgb(79, 154, 240) 50%, rgba(0, 58, 219, 1) 100%);
  color:#fff" (click)="downloadCSV()">Download CSV
      <i class="fa-solid fa-download"></i>
    </button>
    <button mat-raised-button style="background: linear-gradient(192deg, rgb(131, 164, 236) 0%, rgb(79, 154, 240) 50%, rgba(0, 58, 219, 1) 100%);
  color:#fff" (click)="downloadExcel()">Download Excel
      <i class="fa-solid fa-download"></i>
    </button>
  </div>

  <div class="table-wrapper">
    <!-- Header-Top Scroll Buttons -->

    <div class="table-scroll-container">
      <div class="header-scroll-buttons">
        <button class="scroll-btn left" (click)="scrollTable('left')">‹</button>
        <button class="scroll-btn right" (click)="scrollTable('right')">›</button>
      </div>
      <!-- Scrollable Table Container -->
      <div class="scroll-container" #tableContainer>
        <table mat-table [dataSource]="dataSource" matSort class="custom-table">
      
          <!-- Dynamically render columns -->
          <ng-container *ngFor="let column of columnDefs" [matColumnDef]="column.value">
            <!-- Header cell with sort and filter -->
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="header-cell"
    style="position: sticky; background-color: #73d4ff; color:white; border:2px solid white;">
  <div class="header-content" style="border: 1px ;">
    <!-- Column Name with Sort Icon -->
    <div class="d-flex align-items-center justify-content-between">
      <span>{{ column.name }}</span>
      <i class="fa-solid" [ngClass]="{
          'fa-sort-up': activeSort === column.value && sortDirection === 'asc',
          'fa-sort-down': activeSort === column.value && sortDirection === 'desc',
          'fa-sort': activeSort !== column.value
        }" style="margin-left: 8px;"></i>
    </div>

    <!-- ✅ Filter Input + Filter Icon Dropdown -->
    <ng-container *ngIf="filterableColumns.includes(column.value)">
      <div class="filter-box" style="border: 1px solid black;">
        <input
          #filterInput
          matInput
          placeholder="Filter"
          style="border: 1cm;"
          (keyup)="applyColumnFilter(column.value, $event)"
        />
        <div class="filter-icon-wrapper">
          <button mat-icon-button (click)="toggleDropdown(column.value, $event)">
            <i class="fa-solid fa-filter"></i>
          </button>

          <!-- Dropdown for Filter Conditions -->
          <div
            *ngIf="openFilter[column.value]"
            class="filter-dropdown"
            #dropdownRef
          >
            <ul>
              <li
                *ngFor="let option of ['Starts with','Contains','Not Contains','Ends With','Equals','Not Equals']"
                (click)="selectFilterCondition(column.value, option)"
              >
                {{ option }}
              </li>
            </ul>
            <button
              mat-icon-button
              (click)="clearFilter(column.value, filterInput); $event.stopPropagation()"
            >
              <i class="fa-solid fa-filter-circle-xmark"></i>
            </button>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</th>

      
            <!-- Table cell -->
            <td mat-cell *matCellDef="let element">
              <ng-container [ngSwitch]="column.value">
                <img *ngSwitchCase="'flag'" [src]="element[column.value]" alt="flag" class="flag-img" />
                <span *ngSwitchDefault>{{ element[column.value] }}</span>
              </ng-container>
            </td>
          </ng-container>
      
          <!-- Render rows -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns" style="background-color: #def1ff;"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
        </table>
      </div>
      
    </div>
  </div>
</div>
<mat-paginator  [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

<!-- <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator> -->